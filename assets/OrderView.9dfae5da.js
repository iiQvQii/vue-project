import{a as m,o as l,a6 as a,b as s,w as c,V as f,a7 as y,S as V,d as _,g as t,P as h,a8 as p,a9 as n}from"./index.07df6abb.js";import{V as g}from"./VDivider.619fab77.js";import{V as w}from"./VTable.b21bd6bf.js";const x={id:"orders"},k=t("h1",{class:"text-center"},"\u6211\u7684\u8A02\u55AE",-1),D=t("thead",null,[t("tr",null,[t("th",null,"\u7DE8\u865F"),t("th",null,"\u4E0B\u55AE\u65E5\u671F"),t("th",null,"\u91D1\u984D"),t("th",null,"\u5546\u54C1"),t("th",null,"ID")])],-1),S={key:1},v=t("td",{colspan:"5"},[t("h3",{class:"text-center"},"\u6C92\u6709\u8A02\u55AE")],-1),B=[v],N={__name:"OrderView",setup(P){const i=m([]);return(async()=>{try{const{data:r}=await y.get("/orders");i.push(...r.result.map(o=>(o.totalPrice=o.products.reduce((e,u)=>e+u.product.price*u.quantity,0),o)))}catch(r){console.log(r),V.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(r,o)=>(l(),a("div",x,[s(f,null,{default:c(()=>[s(_,{cols:"12"},{default:c(()=>[k]),_:1}),s(g),s(_,{cols:"12"},{default:c(()=>[s(w,null,{default:c(()=>[D,t("tbody",null,[i.length>0?(l(!0),a(h,{key:0},p(i,(e,u)=>(l(),a("tr",{key:e._id},[t("td",null,n(u+1),1),t("td",null,n(new Date(e.date).toLocaleDateString()),1),t("td",null,n(e.totalPrice),1),t("td",null,[t("ul",null,[(l(!0),a(h,null,p(e.products,d=>(l(),a("li",{key:d._id},n(d.product.name)+" x "+n(d.quantity),1))),128))])]),t("td",null,n(e._id),1)]))),128)):(l(),a("tr",S,B))])]),_:1})]),_:1})]),_:1})]))}};export{N as default};
